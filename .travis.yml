language: elixir
elixir:
  - 1.8
otp_release:
  - 21.3
sudo: false

script:
  - mix docs

deploy:
  - provider: script
    skip_cleanup: true
    script: bash deploy.sh ""
    on:
      branch:
        - master

  - provider: script
    skip_cleanup: true
    script: bash deploy.sh $TRAVIS_BRANCH
    on:
      all_branches: true
      # if branch name matches semversion pattern
      condition:  $TRAVIS_BRANCH =~ ^v[0-9]+\.[0-9]+(\.[0-9]+)?(-[^\s]*)?$
